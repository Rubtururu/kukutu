<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart Staking BNB Avanzado</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- CDN Web3 -->
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <!-- CDN Chart.js para la gráfica -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Smart Staking BNB Avanzado</h1>
    <button id="connectWalletBtn">Conectar MetaMask</button>
    <p>Wallet: <span id="walletAddress">No conectado</span></p>
  </header>

  <section id="globalStats">
    <h2>Estadísticas Globales</h2>
    <ul>
      <li>Total Staked: <span id="totalStaked">-</span> BNB</li>
      <li>Total Treasury: <span id="totalTreasury">-</span> BNB</li>
      <li>Dividendo Diario Total: <span id="dailyDividend">-</span> BNB</li>
      <li>Stakers Activos: <span id="activeStakers">-</span></li>
    </ul>
  </section>

  <section id="userStats">
    <h2>Estadísticas Usuario</h2>
    <ul>
      <li>BNB en Stake: <span id="userStaked">-</span></li>
      <li>Recompensas Pendientes: <span id="userPendingRewards">-</span> BNB</li>
      <li>Estimación Diaria: <span id="userDailyEstimate">-</span> BNB</li>
      <li>Participación: <span id="userShare">-</span></li>
      <li>Tiempo hasta próximo dividendo: <span id="userNextDistribution">-</span></li>
    </ul>
  </section>

  <section id="actions">
    <h2>Acciones</h2>

    <div class="action-block">
      <h3>Hacer Stake</h3>
      <input type="number" id="stakeAmount" placeholder="Cantidad en BNB" step="0.001" min="0" />
      <button onclick="stake()">Stake</button>
    </div>

    <div class="action-block">
      <h3>Retirar Stake Completo</h3>
      <button onclick="withdrawStake()">Retirar todo</button>
    </div>

    <div class="action-block">
      <h3>Retirar Stake Parcial</h3>
      <input type="number" id="withdrawAmount" placeholder="Cantidad en BNB" step="0.001" min="0" />
      <button onclick="withdrawPartialStake()">Retirar parcial</button>
    </div>

    <div class="action-block">
      <h3>Retirar Recompensas</h3>
      <button onclick="withdrawRewards()">Retirar recompensas</button>
    </div>
  </section>

  <section id="rankings">
    <h2>Rankings Top 50</h2>

    <div class="ranking-block">
      <h3>Top Stakers</h3>
      <ol id="stakeRankingList">
        <li>Cargando...</li>
      </ol>
    </div>

    <div class="ranking-block">
      <h3>Top Receptores de Dividendos</h3>
      <ol id="dividendRankingList">
        <li>Cargando...</li>
      </ol>
    </div>
  </section>

  <section id="chartSection">
    <h2>Gráfica Pool Dividendos</h2>
    <canvas id="dividendChart" width="600" height="300"></canvas>
  </section>

  <script src="app.js"></script>
</body>
</html>
